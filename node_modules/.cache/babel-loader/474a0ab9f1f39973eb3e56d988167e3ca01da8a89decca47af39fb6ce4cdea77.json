{"ast":null,"code":"import _slicedToArray from\"D:/food order project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"D:/food order project/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"D:/food order project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useReducer,useEffect}from\"react\";import CartContext from\"./cart-context\";import{jsx as _jsx}from\"react/jsx-runtime\";function cartReducer(state,action){if(action.type===\"add\"){var indexOFItem=state.items.findIndex(function(item){return item.id===action.item.id;});var newItem;if(indexOFItem!=-1){var temp=state.items[indexOFItem];newItem=_objectSpread(_objectSpread({},temp),{},{amount:temp.amount+action.item.amount});var updatedItems=_toConsumableArray(state.items);updatedItems[indexOFItem]=newItem;var newTotalAmount=state.totalAmount+action.item.price*action.item.amount;return{items:updatedItems,totalAmount:newTotalAmount};}else{var _updatedItems=state.items.concat(action.item);var _newTotalAmount=state.totalAmount+action.item.price*action.item.amount;return{items:_updatedItems,totalAmount:_newTotalAmount};}}if(action.type===\"remove\"){var _indexOFItem=state.items.findIndex(function(item){return item.id===action.id;});var _newTotalAmount2=state.totalAmount-state.items[_indexOFItem].price;if(state.items[_indexOFItem].amount==1){//remove completed\nvar _updatedItems2=state.items.filter(function(temp){return temp.id!=action.id;});return{items:_updatedItems2,totalAmount:_newTotalAmount2};}else{//update the amount\nvar _newItem=_objectSpread(_objectSpread({},state.items[_indexOFItem]),{},{amount:state.items[_indexOFItem].amount-1});var _updatedItems3=_toConsumableArray(state.items);_updatedItems3[_indexOFItem]=_newItem;return{items:_updatedItems3,totalAmount:_newTotalAmount2};}}if(action.type===\"clear\"){return{items:[],totalAmount:0};}return state;}var initial={items:[],totalAmount:0};function CardProvider(props){var _useReducer=useReducer(cartReducer,initial),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],cartReducerFunction=_useReducer2[1];function addItemIntoCart(item){cartReducerFunction({type:\"add\",item:item});}function removeItemFromCart(id){cartReducerFunction({type:\"remove\",id:id});}function clearCartItems(){cartReducerFunction({type:\"clear\",id:1});}var cartContext={items:cartState.items,totalAmount:cartState.totalAmount,addItem:addItemIntoCart,removeItem:removeItemFromCart,clearCart:clearCartItems};return/*#__PURE__*/_jsx(CartContext.Provider,{value:cartContext,children:props.children});}export default CardProvider;","map":{"version":3,"names":["useReducer","useEffect","CartContext","jsx","_jsx","cartReducer","state","action","type","indexOFItem","items","findIndex","item","id","newItem","temp","_objectSpread","amount","updatedItems","_toConsumableArray","newTotalAmount","totalAmount","price","concat","filter","initial","CardProvider","props","_useReducer","_useReducer2","_slicedToArray","cartState","cartReducerFunction","addItemIntoCart","removeItemFromCart","clearCartItems","cartContext","addItem","removeItem","clearCart","Provider","value","children"],"sources":["D:/food order project/src/components/store/CartProvider.js"],"sourcesContent":["import { useReducer, useEffect } from \"react\";\r\nimport CartContext from \"./cart-context\";\r\n\r\nfunction cartReducer(state, action) {\r\n  if (action.type === \"add\") {\r\n    const indexOFItem = state.items.findIndex(\r\n      (item) => item.id === action.item.id\r\n    );\r\n\r\n    let newItem;\r\n\r\n    if (indexOFItem != -1) {\r\n      const temp = state.items[indexOFItem];\r\n      newItem = {\r\n        ...temp,\r\n        amount: temp.amount + action.item.amount,\r\n      };\r\n      const updatedItems = [...state.items];\r\n      updatedItems[indexOFItem] = newItem;\r\n      const newTotalAmount =\r\n        state.totalAmount + action.item.price * action.item.amount;\r\n      return {\r\n        items: updatedItems,\r\n        totalAmount: newTotalAmount,\r\n      };\r\n    } else {\r\n      const updatedItems = state.items.concat(action.item);\r\n      const newTotalAmount =\r\n        state.totalAmount + action.item.price * action.item.amount;\r\n      return {\r\n        items: updatedItems,\r\n        totalAmount: newTotalAmount,\r\n      };\r\n    }\r\n  }\r\n  if (action.type === \"remove\") {\r\n    const indexOFItem = state.items.findIndex((item) => item.id === action.id);\r\n    const newTotalAmount = state.totalAmount - state.items[indexOFItem].price;\r\n    if (state.items[indexOFItem].amount == 1) {\r\n      //remove completed\r\n      const updatedItems = state.items.filter((temp) => temp.id != action.id);\r\n      return {\r\n        items: updatedItems,\r\n        totalAmount: newTotalAmount,\r\n      };\r\n    } else {\r\n      //update the amount\r\n      let newItem = {\r\n        ...state.items[indexOFItem],\r\n        amount: state.items[indexOFItem].amount - 1,\r\n      };\r\n      const updatedItems = [...state.items];\r\n      updatedItems[indexOFItem] = newItem;\r\n      return {\r\n        items: updatedItems,\r\n        totalAmount: newTotalAmount,\r\n      };\r\n    }\r\n  }\r\n\r\n  if (action.type === \"clear\") {\r\n    return {\r\n      items: [],\r\n      totalAmount: 0,\r\n    };\r\n  }\r\n\r\n  return state;\r\n}\r\n\r\nconst initial = {\r\n  items: [],\r\n  totalAmount: 0,\r\n};\r\n\r\nfunction CardProvider(props) {\r\n  const [cartState, cartReducerFunction] = useReducer(cartReducer, initial);\r\n\r\n  function addItemIntoCart(item) {\r\n    cartReducerFunction({ type: \"add\", item: item });\r\n  }\r\n  function removeItemFromCart(id) {\r\n    cartReducerFunction({ type: \"remove\", id: id });\r\n  }\r\n\r\n  function clearCartItems() {\r\n    cartReducerFunction({ type: \"clear\", id: 1 });\r\n  }\r\n\r\n  const cartContext = {\r\n    items: cartState.items,\r\n    totalAmount: cartState.totalAmount,\r\n    addItem: addItemIntoCart,\r\n    removeItem: removeItemFromCart,\r\n    clearCart: clearCartItems,\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider value={cartContext}>\r\n      {props.children}\r\n    </CartContext.Provider>\r\n  );\r\n}\r\n\r\nexport default CardProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}